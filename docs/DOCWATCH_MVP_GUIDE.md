# DocWatch MVP 가이드

> **본 문서는 개발 전반에서 참조하는 핵심 가이드입니다.**
> 모든 기능 구현, 설계 결정 시 이 문서를 기준으로 합니다.

---

## 1. DocWatch MVP 기능 목록 (한 페이지 요약)

### 제품 정체성
- **DocWatch**: 기획자·PM·업무 담당자를 위한 로컬 기반 업무 자동화 도구
- **유료 B2B 소프트웨어** (무료 유틸리티 ❌)
- **공공기관 / 금융 / 폐쇄망 환경 지원**

### CORE 필수 기능 (7개)

| # | 기능 | 설명 | 우선순위 |
|---|------|------|----------|
| 1 | **폴더 감시** | 파일/폴더 생성·수정·삭제 감지, ON/OFF 토글 | P0 |
| 2 | **알림 시스템** | 데스크톱 알림 + 조건 설정 (수정만/생성만 등) | P0 |
| 3 | **알림 클릭 액션** | 해당 폴더 또는 파일 바로 열기 | P0 |
| 4 | **외부 알림** | 텔레그램 1종 (팀즈는 Phase 2) | P0 |
| 5 | **문서 변경 요약** | PPTX 변경 요약 (DOCX는 Phase 2) | P1 |
| 6 | **회의록 초안 생성** | 녹음 → 로컬 STT → 규칙 기반 요약 → DOCX 출력 | P1 |
| 7 | **로컬 우선 처리** | 인터넷 없이 동작, 폐쇄망 지원 | P0 |

### 제외 기능 (절대 구현 금지)
- 다크/캐릭터/동물 모드
- SNS / 커뮤니티
- 투두·캘린더 풀세트
- 모바일 앱
- 애드센스/광고
- 피그마 연동
- 대규모 AI 기능

---

## 2. 전체 아키텍처 다이어그램

```
┌─────────────────────────────────────────────────────────────┐
│                      DocWatch Desktop                        │
│                        (Electron)                            │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │   Main      │  │   Renderer  │  │   Background        │  │
│  │   Process   │  │   Process   │  │   Services          │  │
│  │             │  │             │  │                     │  │
│  │ - Tray      │  │ - UI (HTML) │  │ - Folder Watcher    │  │
│  │ - IPC       │  │ - React/Vue │  │ - STT Engine        │  │
│  │ - Native    │  │ - Charts    │  │ - Doc Analyzer      │  │
│  │   Dialogs   │  │             │  │ - Notification Svc  │  │
│  └─────────────┘  └─────────────┘  └─────────────────────┘  │
│         │                │                    │              │
│         └────────────────┼────────────────────┘              │
│                          │                                   │
│  ┌───────────────────────┴───────────────────────────────┐  │
│  │                   Core Services                        │  │
│  │                                                        │  │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │  │
│  │  │ chokidar     │ │ whisper.cpp  │ │ pptx-parser  │   │  │
│  │  │ (폴더 감시)  │ │ (로컬 STT)   │ │ (문서 분석)  │   │  │
│  │  └──────────────┘ └──────────────┘ └──────────────┘   │  │
│  │                                                        │  │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │  │
│  │  │ SQLite       │ │ docxtemplater│ │ Telegram Bot │   │  │
│  │  │ (로컬 DB)    │ │ (회의록생성) │ │ (외부 알림)  │   │  │
│  │  └──────────────┘ └──────────────┘ └──────────────┘   │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
                    ┌─────────────────┐
                    │   Local Files   │
                    │                 │
                    │ - settings.json │
                    │ - watchlist.db  │
                    │ - whisper.model │
                    │ - templates/    │
                    └─────────────────┘
```

### 핵심 설계 원칙
1. **No Cloud Dependency**: 모든 처리는 로컬에서 완결
2. **Single Process Model**: Electron Main Process에서 핵심 로직 처리
3. **File-Based Config**: JSON/SQLite로 설정 관리, 외부 서버 불필요
4. **Optional Network**: 텔레그램 알림만 네트워크 사용 (OFF 가능)

---

## 3. 로컬 STT 처리 흐름 상세

### whisper.cpp 통합 구조

```
┌────────────────────────────────────────────────────────────┐
│                    회의 녹음 처리 흐름                      │
├────────────────────────────────────────────────────────────┤
│                                                            │
│  [1] 녹음 시작                                             │
│      │                                                     │
│      ▼                                                     │
│  ┌──────────────┐                                          │
│  │ Audio Input  │  마이크 또는 시스템 오디오               │
│  │ (WAV/MP3)    │                                          │
│  └──────────────┘                                          │
│      │                                                     │
│      ▼                                                     │
│  [2] 오디오 전처리                                         │
│  ┌──────────────┐                                          │
│  │ FFmpeg       │  → 16kHz, mono, 16-bit PCM 변환         │
│  │ (선택적)     │                                          │
│  └──────────────┘                                          │
│      │                                                     │
│      ▼                                                     │
│  [3] 로컬 STT 처리                                         │
│  ┌──────────────────────────────────────────┐              │
│  │            whisper.cpp                    │              │
│  │                                           │              │
│  │  - 모델: ggml-small.bin (기본 포함)      │              │
│  │  - 언어: 한국어 (ko) / 자동 감지         │              │
│  │  - GPU 없이도 CPU 실행 가능              │              │
│  │  - 음성 데이터 외부 전송 없음            │              │
│  └──────────────────────────────────────────┘              │
│      │                                                     │
│      ▼                                                     │
│  [4] 텍스트 후처리                                         │
│  ┌──────────────┐                                          │
│  │ 규칙 기반    │  → 타임스탬프 매핑                       │
│  │ 정제         │  → 문장 분리                             │
│  │              │  → 키워드 추출                           │
│  └──────────────┘                                          │
│      │                                                     │
│      ▼                                                     │
│  [5] 회의록 생성                                           │
│  ┌──────────────┐                                          │
│  │ DOCX         │  → 결정사항 / 이슈 / 액션아이템 추출    │
│  │ Template     │  → 템플릿 기반 문서 생성                 │
│  └──────────────┘                                          │
│                                                            │
└────────────────────────────────────────────────────────────┘
```

### whisper.cpp 설정

```javascript
// whisper 설정 예시
const whisperConfig = {
    modelPath: './resources/models/ggml-small.bin',  // ~500MB
    language: 'ko',           // 한국어
    threads: 4,               // CPU 스레드 수
    translate: false,         // 번역 비활성화
    timestamps: true,         // 타임스탬프 포함
    outputFormat: 'json',     // JSON 출력
};
```

### 라이선스 고지 (필수 포함)

```
본 제품은 MIT 라이선스 기반 오픈소스 Whisper 엔진을
로컬 환경에서 실행하며 음성 데이터는 외부로 전송되지 않습니다.

Whisper: Copyright (c) OpenAI
License: MIT License
https://github.com/openai/whisper
```

---

## 4. 회의록 템플릿 구조 예시

### DOCX 템플릿 구조

```
┌─────────────────────────────────────────┐
│              회의록                      │
├─────────────────────────────────────────┤
│                                          │
│  ■ 기본 정보                             │
│  ┌────────────┬────────────────────┐    │
│  │ 회의 일시   │ {meeting_date}      │    │
│  ├────────────┼────────────────────┤    │
│  │ 회의 시간   │ {start_time} ~ {end}│    │
│  ├────────────┼────────────────────┤    │
│  │ 녹음 파일   │ {audio_filename}    │    │
│  ├────────────┼────────────────────┤    │
│  │ 생성 일시   │ {generated_at}      │    │
│  └────────────┴────────────────────┘    │
│                                          │
│  ■ 회의 내용 요약                        │
│  ┌──────────────────────────────────┐   │
│  │ {summary_text}                    │   │
│  │                                   │   │
│  │ 주요 키워드: {keywords}           │   │
│  └──────────────────────────────────┘   │
│                                          │
│  ■ 결정 사항                             │
│  □ {decision_1}                          │
│  □ {decision_2}                          │
│  □ {decision_3}                          │
│                                          │
│  ■ 이슈 / 논의 필요                      │
│  ⚠ {issue_1}                             │
│  ⚠ {issue_2}                             │
│                                          │
│  ■ 액션 아이템                           │
│  ┌──────┬────────────────┬────────┐     │
│  │ 담당자│ 내용            │ 기한   │     │
│  ├──────┼────────────────┼────────┤     │
│  │ -    │ {action_1}      │ -      │     │
│  │ -    │ {action_2}      │ -      │     │
│  └──────┴────────────────┴────────┘     │
│                                          │
│  ■ 전체 녹취록                           │
│  ┌──────────────────────────────────┐   │
│  │ [00:00] {transcript_line_1}       │   │
│  │ [00:15] {transcript_line_2}       │   │
│  │ [00:32] {transcript_line_3}       │   │
│  │ ...                               │   │
│  └──────────────────────────────────┘   │
│                                          │
│  ─────────────────────────────────────  │
│  DocWatch로 자동 생성됨                  │
│  본 회의록은 초안이며 검토가 필요합니다  │
└─────────────────────────────────────────┘
```

### 규칙 기반 추출 로직

```javascript
// 결정 사항 추출 패턴
const decisionPatterns = [
    /(?:결정|확정|정했|하기로|진행하자|하겠습니다)/g,
    /(?:~로 가자|~하는 걸로|~로 결론)/g
];

// 이슈 추출 패턴
const issuePatterns = [
    /(?:문제|이슈|확인 필요|검토 필요|우려)/g,
    /(?:어떻게 할|고민|논의 필요)/g
];

// 액션 아이템 추출 패턴
const actionPatterns = [
    /(?:~해 주세요|~해야|~까지|담당|체크)/g,
    /(?:확인해|준비해|보내|공유해)/g
];

// 키워드 추출 (TF-IDF 없이 빈도 기반)
function extractKeywords(text, topN = 5) {
    const words = text.split(/\s+/);
    const freq = {};
    words.forEach(w => {
        if (w.length > 1) freq[w] = (freq[w] || 0) + 1;
    });
    return Object.entries(freq)
        .sort((a, b) => b[1] - a[1])
        .slice(0, topN)
        .map(([word]) => word);
}
```

---

## 5. 초기 개발 로드맵 (6주)

### Week 1-2: 코어 리팩토링
| 일정 | 작업 | 산출물 |
|------|------|--------|
| D1-2 | 프로젝트 브랜딩 변경 | package.json, UI 텍스트 |
| D3-5 | chokidar 기반 폴더 감시 고도화 | 감시 ON/OFF, 조건 설정 |
| D6-7 | 데스크톱 알림 시스템 개선 | 클릭 시 폴더/파일 열기 |
| D8-10 | SQLite 로컬 DB 통합 | 설정, 로그 영구 저장 |

### Week 3-4: STT 통합
| 일정 | 작업 | 산출물 |
|------|------|--------|
| D11-13 | whisper.cpp 바인딩 통합 | Node.js Native Addon |
| D14-16 | 녹음 기능 구현 | 마이크 입력, 파일 저장 |
| D17-18 | STT 처리 파이프라인 | 오디오 → 텍스트 변환 |
| D19-20 | 규칙 기반 텍스트 분석 | 키워드, 결정사항 추출 |

### Week 5: 문서 생성
| 일정 | 작업 | 산출물 |
|------|------|--------|
| D21-22 | DOCX 템플릿 시스템 | docxtemplater 통합 |
| D23-24 | 회의록 자동 생성 | 템플릿 → DOCX 출력 |
| D25-26 | PPTX 변경 감지 | python-pptx 또는 JS 라이브러리 |
| D27-28 | 변경 요약 UI | 변경 전/후 비교 표시 |

### Week 6: 패키징 및 QA
| 일정 | 작업 | 산출물 |
|------|------|--------|
| D29-30 | 텔레그램 알림 통합 | Bot API 연동 |
| D31-33 | 빌드 및 설치 패키지 | Windows NSIS 설치파일 |
| D34-35 | 라이선스 정리 | MIT 고지, 사용 동의 |
| D36-38 | QA 및 버그 수정 | 릴리스 후보 |

---

## 6. 기술적 리스크와 회피 전략

### 리스크 1: whisper.cpp 빌드 복잡도
| 항목 | 내용 |
|------|------|
| **문제** | Native Addon 빌드가 Windows에서 복잡 |
| **영향** | 개발 지연, 사용자 환경 호환성 문제 |
| **회피** | pre-built 바이너리 포함, node-gyp 의존성 최소화 |
| **대안** | whisper-node 같은 래퍼 라이브러리 사용 |

### 리스크 2: Whisper 모델 용량
| 항목 | 내용 |
|------|------|
| **문제** | small 모델 ~500MB, 설치 파일 비대 |
| **영향** | 다운로드 시간 증가, 사용자 이탈 |
| **회피** | 최초 실행 시 모델 다운로드 (선택적) |
| **대안** | tiny 모델 (~75MB) 기본, small 업그레이드 옵션 |

### 리스크 3: CPU 성능 요구사항
| 항목 | 내용 |
|------|------|
| **문제** | 저사양 PC에서 STT 속도 저하 |
| **영향** | 사용자 경험 저하 |
| **회피** | 진행률 표시, 백그라운드 처리 |
| **대안** | 청크 단위 처리, 취소 가능한 작업 |

### 리스크 4: PPTX 파싱 정확도
| 항목 | 내용 |
|------|------|
| **문제** | 복잡한 PPTX 구조 파싱 실패 |
| **영향** | 변경 요약 기능 품질 저하 |
| **회피** | 텍스트 변경만 1차 지원, 이미지/차트는 Phase 2 |
| **대안** | "정확한 비교가 어려운 요소가 있습니다" 고지 |

### 리스크 5: 폐쇄망 환경 테스트
| 항목 | 내용 |
|------|------|
| **문제** | 실제 폐쇄망 환경 테스트 어려움 |
| **영향** | 출시 후 호환성 이슈 |
| **회피** | 네트워크 차단 상태 자동 감지, Graceful Degradation |
| **대안** | 오프라인 모드 명시적 설정 옵션 |

---

## 7. "지금 당장 팔 수 있는 이유" 정리

### 시장 니즈 검증

| 타겟 | 페인 포인트 | DocWatch 해결책 |
|------|------------|-----------------|
| **기획자** | 공유폴더 파일 변경 놓침 | 실시간 알림 + 요약 |
| **PM** | 회의 내용 정리에 1시간+ | 자동 회의록 초안 |
| **공공기관** | 클라우드 사용 불가 | 100% 로컬 처리 |
| **금융권** | 보안 규정 위반 우려 | 데이터 외부 전송 없음 |

### 경쟁 우위

| 기존 솔루션 | 한계 | DocWatch 차별점 |
|-------------|------|-----------------|
| 폴더 감시 유틸 | 단순 알림만 | 문서 요약 + 회의록 |
| 클라우드 STT | 보안 이슈 | 완전 로컬 처리 |
| MS Teams | 구독료 부담 | 1회 구매 또는 저렴한 구독 |
| Notion AI | 폐쇄망 불가 | 오프라인 완전 지원 |

### 가격 정책 (예시)

| 플랜 | 가격 | 기능 |
|------|------|------|
| **Free Trial** | 14일 무료 | 전 기능 |
| **Personal** | ₩39,000/년 | 1 PC, 전 기능 |
| **Team** | ₩99,000/년/5인 | 공유 템플릿, 우선 지원 |
| **Enterprise** | 문의 | 커스텀 배포, SLA |

### 즉시 판매 가능 이유

1. **검증된 기술 스택**: Electron, whisper.cpp 모두 production-ready
2. **명확한 타겟**: 기획자/PM은 구매 결정권 있는 직군
3. **폐쇄망 유일 솔루션**: 대체재 없는 시장
4. **낮은 CAC**: 커뮤니티 바이럴, B2B 직접 영업
5. **높은 LTV**: 업무 필수 도구화 시 이탈률 낮음

---

## 8. 브랜딩 가이드

### 제품명
- **영문**: DocWatch
- **한글**: 독와치 (보조 표기만)

### 태그라인
- "기획자를 위한 로컬 업무 자동화"
- "폴더 감시부터 회의록까지, 로컬에서 끝"

### 금지 표현
- ❌ "AI 기반", "AI 요약", "AI 회의록"
- ❌ "무료", "Free" (Trial만 허용)
- ❌ "클라우드", "SaaS"

### 권장 표현
- ✅ "자동 회의록 초안 생성"
- ✅ "로컬 음성 인식"
- ✅ "폐쇄망 지원"
- ✅ "데이터 외부 전송 없음"

### 도메인 후보
- docwatch.app (1순위)
- docwatch.io (2순위)
- getdocwatch.com (대안)

---

## 9. 기술 스택 최종 정리

| 레이어 | 기술 | 비고 |
|--------|------|------|
| Desktop | Electron 28+ | IPC, Native Module 지원 |
| UI | Vanilla JS (현재) → Vue 3 (Phase 2) | 점진적 마이그레이션 |
| 파일 감시 | chokidar | 현재 fs.watch → 전환 필요 |
| 로컬 DB | SQLite (better-sqlite3) | 현재 JSON → 전환 필요 |
| STT | whisper.cpp + whisper-node | 신규 통합 |
| 문서 생성 | docxtemplater | 신규 통합 |
| PPTX 분석 | pptx-parser 또는 mammoth | 신규 통합 |
| 외부 알림 | node-telegram-bot-api | 현재 구현 유지 |

---

## 10. 체크리스트 (출시 전 필수)

### 기능 완성도
- [ ] 폴더 감시 ON/OFF
- [ ] 알림 조건 설정
- [ ] 알림 클릭 → 파일/폴더 열기
- [ ] 텔레그램 알림 발송
- [ ] PPTX 변경 요약
- [ ] 녹음 → STT → 회의록 DOCX

### 보안/컴플라이언스
- [ ] 라이선스 고지 (Whisper MIT)
- [ ] 데이터 미전송 고지
- [ ] 개인정보 처리방침 (미수집 고지)

### 패키징
- [ ] Windows 64bit 설치파일
- [ ] whisper 모델 번들링 옵션
- [ ] 자동 업데이트 (electron-updater)

### 마케팅
- [ ] 랜딩 페이지
- [ ] 14일 무료 체험 로직
- [ ] 결제 연동 (Toss/Stripe)

---

> **이 문서는 DocWatch 개발의 Single Source of Truth입니다.**
> 기능 추가, 설계 변경 시 반드시 이 문서를 먼저 업데이트하세요.
