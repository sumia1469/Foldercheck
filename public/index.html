<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocWatch - 로컬 업무 자동화</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- 커스텀 타이틀바 (macOS 스타일) -->
    <div class="custom-titlebar">
        <div class="titlebar-drag-region"></div>
        <div class="titlebar-title">DocWatch</div>
        <div class="titlebar-controls">
            <button class="titlebar-btn minimize" id="minimizeBtn" title="최소화">
                <svg viewBox="0 0 12 12"><rect y="5" width="12" height="2" fill="currentColor"/></svg>
            </button>
            <button class="titlebar-btn maximize" id="maximizeBtn" title="최대화">
                <svg viewBox="0 0 12 12"><rect x="1" y="1" width="10" height="10" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
            </button>
            <button class="titlebar-btn close" id="closeBtn" title="닫기">
                <svg viewBox="0 0 12 12"><path d="M1 1L11 11M11 1L1 11" stroke="currentColor" stroke-width="1.5"/></svg>
            </button>
        </div>
    </div>

    <div class="app-container">
        <!-- 좌측 사이드바 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
                            <circle cx="12" cy="13" r="2"/>
                            <path d="M12 11v-1m0 6v1"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <span class="app-name">DocWatch</span>
                        <span class="app-subtitle">Local Automation</span>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="dashboard">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="7"/>
                            <rect x="14" y="3" width="7" height="7"/>
                            <rect x="14" y="14" width="7" height="7"/>
                            <rect x="3" y="14" width="7" height="7"/>
                        </svg>
                    </span>
                    <span class="nav-text">대시보드</span>
                </a>
                <a href="#" class="nav-item" data-section="monitor">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </span>
                    <span class="nav-text">모니터링</span>
                </a>
                <a href="#" class="nav-item" data-section="folders">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
                        </svg>
                    </span>
                    <span class="nav-text">폴더 관리</span>
                </a>
                <a href="#" class="nav-item" data-section="stats">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 20V10M12 20V4M6 20v-6"/>
                        </svg>
                    </span>
                    <span class="nav-text">통계</span>
                </a>
                <a href="#" class="nav-item" data-section="notifications">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"/>
                        </svg>
                    </span>
                    <span class="nav-text">알림</span>
                </a>
                <a href="#" class="nav-item" data-section="meeting">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"/>
                            <path d="M19 10v2a7 7 0 01-14 0v-2M12 19v4M8 23h8"/>
                        </svg>
                    </span>
                    <span class="nav-text">회의록</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="server-status">
                    <span class="status-dot online"></span>
                    <span class="status-text">서버 실행 중</span>
                </div>
                <div class="server-info">
                    <span>localhost:4400</span>
                </div>
                <a href="#" class="nav-item settings-btn" data-section="settings">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                        </svg>
                    </span>
                    <span class="nav-text">설정</span>
                </a>
            </div>
        </aside>

        <!-- 메인 콘텐츠 -->
        <main class="main-content">
            <!-- 대시보드 섹션 -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h1>대시보드</h1>
                    <div class="header-actions">
                        <span class="last-update">마지막 업데이트: <span id="lastUpdate">-</span></span>
                    </div>
                </div>

                <!-- 상태 카드 -->
                <div class="status-banner">
                    <div class="status-icon success">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                            <path d="M20 6L9 17l-5-5"/>
                        </svg>
                    </div>
                    <div class="status-info">
                        <h2>정상 작동 중</h2>
                        <p>• 모든 폴더가 감시 중입니다</p>
                        <p>• 마지막 검사: <span id="lastCheck">-</span></p>
                    </div>
                </div>

                <!-- 통계 그리드 -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon create">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                                <path d="M14 2v6h6M12 18v-6M9 15h6"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="statCreate">0</span>
                            <span class="stat-label">생성됨</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon modify">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="statModify">0</span>
                            <span class="stat-label">수정됨</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon delete">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="statDelete">0</span>
                            <span class="stat-label">삭제됨</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon folders">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="statFolders">0</span>
                            <span class="stat-label">감시 폴더</span>
                        </div>
                    </div>
                </div>

                <!-- 퀵 액션 카드 -->
                <div class="quick-actions">
                    <div class="action-card" data-action="folders">
                        <div class="action-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
                                <line x1="12" y1="11" x2="12" y2="17"/>
                                <line x1="9" y1="14" x2="15" y2="14"/>
                            </svg>
                        </div>
                        <span class="action-text">폴더 추가</span>
                    </div>
                    <div class="action-card" data-action="export">
                        <div class="action-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                        </div>
                        <span class="action-text">로그 내보내기</span>
                    </div>
                    <div class="action-card" data-action="stats">
                        <div class="action-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 20V10M12 20V4M6 20v-6"/>
                            </svg>
                        </div>
                        <span class="action-text">통계 보기</span>
                    </div>
                    <div class="action-card" data-action="clear">
                        <div class="action-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                            </svg>
                        </div>
                        <span class="action-text">로그 지우기</span>
                    </div>
                </div>

                <!-- 최근 활동 -->
                <div class="recent-activity">
                    <div class="card-header">
                        <h3>최근 활동</h3>
                        <a href="#" class="view-all" data-section="monitor">모두 보기 →</a>
                    </div>
                    <div class="activity-list" id="recentActivity">
                        <div class="empty-state">
                            <p>아직 변경 기록이 없습니다</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 모니터링 섹션 -->
            <section id="monitor" class="content-section">
                <div class="section-header">
                    <h1>변경 로그</h1>
                    <div class="header-actions">
                        <button id="exportBtn" class="btn btn-secondary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            CSV 내보내기
                        </button>
                        <button id="clearLogsBtn" class="btn btn-danger">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                            </svg>
                            로그 지우기
                        </button>
                    </div>
                </div>

                <div class="filter-bar">
                    <div class="filter-group">
                        <select id="logFilter" class="filter-select">
                            <option value="all">전체</option>
                            <option value="생성">생성</option>
                            <option value="수정">수정</option>
                            <option value="삭제">삭제</option>
                        </select>
                    </div>
                    <div class="search-box">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <input type="text" id="logSearch" placeholder="파일명 검색...">
                    </div>
                </div>

                <div class="log-container" id="logContainer">
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                            <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                        </svg>
                        <p>변경 기록이 없습니다</p>
                    </div>
                </div>
            </section>

            <!-- 폴더 관리 섹션 -->
            <section id="folders" class="content-section">
                <div class="section-header">
                    <h1>폴더 관리</h1>
                </div>

                <div class="add-folder-card">
                    <h3>감시 대상 추가</h3>
                    <p class="help-text">감시할 폴더 또는 파일을 선택하거나 경로를 직접 입력하세요</p>

                    <!-- 선택 버튼 그룹 -->
                    <div class="select-buttons">
                        <button id="selectFolderBtn" class="btn btn-secondary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
                            </svg>
                            폴더 선택
                        </button>
                        <button id="selectFileBtn" class="btn btn-secondary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                                <path d="M14 2v6h6"/>
                            </svg>
                            파일 선택
                        </button>
                        <button id="selectMultipleFoldersBtn" class="btn btn-secondary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
                                <line x1="12" y1="11" x2="12" y2="17"/>
                                <line x1="9" y1="14" x2="15" y2="14"/>
                            </svg>
                            여러 폴더
                        </button>
                        <button id="selectMultipleFilesBtn" class="btn btn-secondary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                                <path d="M14 2v6h6"/>
                                <line x1="12" y1="12" x2="12" y2="18"/>
                                <line x1="9" y1="15" x2="15" y2="15"/>
                            </svg>
                            여러 파일
                        </button>
                    </div>

                    <div class="input-divider">
                        <span>또는 직접 입력</span>
                    </div>

                    <div class="input-group">
                        <input type="text" id="folderInput" placeholder="예: /Users/Documents 또는 C:\Users\Documents">
                        <button id="addBtn" class="btn btn-primary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            추가
                        </button>
                    </div>
                </div>

                <div class="folders-list-card">
                    <h3>감시 중인 폴더</h3>
                    <ul id="folderList" class="folder-list">
                        <li class="empty-state">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
                            </svg>
                            <p>감시 중인 폴더가 없습니다</p>
                        </li>
                    </ul>
                </div>
            </section>

            <!-- 통계 섹션 -->
            <section id="stats" class="content-section">
                <div class="section-header">
                    <h1>통계</h1>
                    <div class="header-actions">
                        <button id="clearStatsBtn" class="btn btn-secondary">초기화</button>
                    </div>
                </div>

                <div class="stats-overview">
                    <div class="overview-card create">
                        <div class="overview-value" id="totalCreate">0</div>
                        <div class="overview-label">총 생성</div>
                    </div>
                    <div class="overview-card modify">
                        <div class="overview-value" id="totalModify">0</div>
                        <div class="overview-label">총 수정</div>
                    </div>
                    <div class="overview-card delete">
                        <div class="overview-value" id="totalDelete">0</div>
                        <div class="overview-label">총 삭제</div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-card">
                        <h3>시간대별 변경</h3>
                        <div class="chart-container">
                            <canvas id="hourlyChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>확장자별 통계</h3>
                        <div class="chart-container">
                            <canvas id="extensionChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 알림 섹션 -->
            <section id="notifications" class="content-section">
                <div class="section-header">
                    <h1>알림 설정</h1>
                </div>

                <div class="settings-card">
                    <h3>데스크톱 알림</h3>
                    <div class="setting-item">
                        <label class="toggle-label">
                            <span>데스크톱 알림 표시</span>
                            <p class="setting-desc">파일 변경 시 데스크톱 알림을 표시합니다</p>
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="notifyDesktop" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="toggle-label">
                            <span>소리 알림</span>
                            <p class="setting-desc">파일 변경 시 알림 소리를 재생합니다</p>
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="notifySound" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>텔레그램 알림</h3>
                    <p class="help-text">파일 변경 시 텔레그램으로 알림을 받습니다</p>

                    <div class="setting-item">
                        <label class="toggle-label">
                            <span>텔레그램 알림 사용</span>
                        </label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="telegramEnabled">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="telegram-config" id="telegramConfig">
                        <div class="form-group">
                            <label>Bot Token</label>
                            <input type="text" id="telegramToken" placeholder="123456:ABC-DEF...">
                        </div>
                        <div class="form-group">
                            <label>Chat ID</label>
                            <input type="text" id="telegramChatId" placeholder="123456789">
                        </div>
                        <div class="button-group">
                            <button id="saveTelegramBtn" class="btn btn-primary">저장</button>
                            <button id="testTelegramBtn" class="btn btn-secondary">테스트</button>
                        </div>
                    </div>
                </div>

            </section>

            <!-- 회의록 섹션 -->
            <section id="meeting" class="content-section">
                <div class="section-header">
                    <h1>회의록 초안 생성</h1>
                </div>

                <!-- 실시간 녹음 카드 -->
                <div class="settings-card recording-card">
                    <h3>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 8px;">
                            <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"/>
                            <path d="M19 10v2a7 7 0 01-14 0v-2"/>
                            <line x1="12" y1="19" x2="12" y2="23"/>
                            <line x1="8" y1="23" x2="16" y2="23"/>
                        </svg>
                        회의 녹음
                    </h3>
                    <p class="help-text">회의 중 직접 녹음하여 회의록 초안을 생성합니다.</p>
                    <p class="help-text" style="color: var(--accent-primary); font-size: 11px;">
                        * 모든 음성 처리는 로컬에서 진행되며 외부로 전송되지 않습니다.
                    </p>

                    <!-- 녹음 컨트롤 -->
                    <div class="recording-controls">
                        <div class="recording-status" id="recordingStatus">
                            <div class="status-indicator" id="statusIndicator"></div>
                            <span id="statusText">대기 중</span>
                        </div>

                        <div class="recording-timer" id="recordingTimer">00:00:00</div>

                        <div class="recording-visualizer" id="recordingVisualizer">
                            <canvas id="visualizerCanvas" width="300" height="40"></canvas>
                        </div>

                        <div class="recording-buttons">
                            <button id="startRecordingBtn" class="btn btn-record btn-start">
                                <svg viewBox="0 0 24 24" fill="currentColor" stroke="none">
                                    <circle cx="12" cy="12" r="10"/>
                                </svg>
                                녹음 시작
                            </button>
                            <button id="pauseRecordingBtn" class="btn btn-record btn-pause" disabled>
                                <svg viewBox="0 0 24 24" fill="currentColor" stroke="none">
                                    <rect x="6" y="4" width="4" height="16"/>
                                    <rect x="14" y="4" width="4" height="16"/>
                                </svg>
                                일시정지
                            </button>
                            <button id="stopRecordingBtn" class="btn btn-record btn-stop" disabled>
                                <svg viewBox="0 0 24 24" fill="currentColor" stroke="none">
                                    <rect x="6" y="6" width="12" height="12"/>
                                </svg>
                                녹음 중지
                            </button>
                        </div>

                        <!-- 녹음 설정 -->
                        <div class="recording-settings">
                            <div class="setting-row">
                                <label>회의 제목</label>
                                <input type="text" id="meetingTitle" placeholder="예: 주간 정기 회의">
                            </div>
                            <div class="setting-row">
                                <label>음질</label>
                                <select id="audioQuality">
                                    <option value="low">낮음 (파일 작음)</option>
                                    <option value="medium" selected>보통 (권장)</option>
                                    <option value="high">높음 (파일 큼)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 녹음 완료 후 표시 -->
                    <div class="recording-complete" id="recordingComplete" style="display: none;">
                        <div class="complete-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                        </div>
                        <h4>녹음이 완료되었습니다</h4>
                        <p id="recordingInfo">녹음 시간: 00:00:00</p>
                        <div class="complete-actions">
                            <button id="generateMinutesBtn" class="btn btn-primary">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                                    <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                                </svg>
                                회의록 생성
                            </button>
                            <button id="downloadRecordingBtn" class="btn btn-secondary">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                    <polyline points="7 10 12 15 17 10"/>
                                    <line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                                녹음 파일 다운로드
                            </button>
                            <button id="discardRecordingBtn" class="btn btn-danger-outline">
                                삭제
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 구분선 -->
                <div class="section-divider">
                    <span>또는</span>
                </div>

                <div class="settings-card">
                    <h3>녹음 파일 업로드</h3>
                    <p class="help-text">기존 녹음 파일을 업로드하여 회의록 초안을 생성합니다.</p>

                    <div class="upload-area" id="uploadArea">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        <p>클릭하거나 파일을 드래그하세요</p>
                        <span class="upload-formats">WAV, MP3, M4A 지원 (최대 2시간)</span>
                        <input type="file" id="audioFileInput" accept=".wav,.mp3,.m4a" style="display: none;">
                    </div>
                </div>

                <div class="settings-card" id="processingCard" style="display: none;">
                    <h3>처리 중...</h3>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <span class="progress-text" id="progressText">음성 인식 중...</span>
                    </div>
                    <p class="help-text" id="processingStatus">파일을 분석하고 있습니다. 잠시 기다려주세요.</p>
                </div>

                <!-- 녹음 파일 목록 -->
                <div class="settings-card">
                    <div class="card-header-flex">
                        <h3>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 18px; height: 18px; vertical-align: middle; margin-right: 6px;">
                                <path d="M9 18V5l12-2v13"/>
                                <circle cx="6" cy="18" r="3"/>
                                <circle cx="18" cy="16" r="3"/>
                            </svg>
                            녹음 파일
                        </h3>
                        <button class="btn btn-sm btn-secondary" onclick="loadRecordings()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 14px; height: 14px;">
                                <path d="M23 4v6h-6M1 20v-6h6"/>
                                <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
                            </svg>
                            새로고침
                        </button>
                    </div>
                    <div id="recordingList" class="recording-list">
                        <div class="empty-state">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M9 18V5l12-2v13"/>
                                <circle cx="6" cy="18" r="3"/>
                                <circle cx="18" cy="16" r="3"/>
                            </svg>
                            <p>저장된 녹음 파일이 없습니다</p>
                        </div>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>최근 회의록</h3>
                    <div id="meetingList" class="meeting-list">
                        <div class="empty-state">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                                <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                            </svg>
                            <p>아직 생성된 회의록이 없습니다</p>
                        </div>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>STT 엔진 정보</h3>
                    <div class="info-list">
                        <div class="info-item">
                            <span class="info-label">엔진</span>
                            <span class="info-value">음성 인식 (로컬)</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">모델</span>
                            <span class="info-value" id="whisperModel">small</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">상태</span>
                            <span class="info-value" id="whisperStatus" style="color: var(--warning);">준비 중</span>
                        </div>
                    </div>
                    <p class="help-text" style="margin-top: 15px; font-size: 11px;">
                        MIT 라이선스 기반 음성 인식 엔진을 사용합니다.<br>
                        음성 데이터는 외부로 전송되지 않습니다.
                    </p>
                </div>
            </section>

            <!-- 설정 섹션 -->
            <section id="settings" class="content-section">
                <div class="section-header">
                    <h1>설정</h1>
                </div>

                <div class="settings-card">
                    <h3>파일 필터</h3>
                    <p class="help-text">특정 확장자만 감시합니다. 비어있으면 모든 파일을 감시합니다.</p>
                    <div class="input-group">
                        <input type="text" id="filterInput" placeholder="확장자 입력 (예: .txt)">
                        <button id="addFilterBtn" class="btn btn-primary">추가</button>
                    </div>
                    <div id="filterList" class="tag-list"></div>
                </div>

                <div class="settings-card">
                    <h3>제외 패턴</h3>
                    <p class="help-text">특정 폴더나 파일을 제외합니다.</p>
                    <div class="input-group">
                        <input type="text" id="excludeInput" placeholder="제외 패턴 (예: node_modules)">
                        <button id="addExcludeBtn" class="btn btn-primary">추가</button>
                    </div>
                    <div id="excludeList" class="tag-list"></div>
                </div>

                <div class="settings-card">
                    <h3>🎙️ 음성 인식 (로컬)</h3>
                    <p class="help-text">회의 녹음을 텍스트로 변환합니다. 인터넷 연결 없이 로컬에서 처리됩니다.</p>

                    <div class="whisper-status" id="whisperStatusSettings">
                        <div class="status-row">
                            <span class="status-label">모델:</span>
                            <span class="status-value" id="whisperModelSettings">ggml-small</span>
                        </div>
                        <div class="status-row">
                            <span class="status-label">상태:</span>
                            <span class="status-value" id="whisperStateSettings">확인 중...</span>
                        </div>
                    </div>
                </div>

                <!-- 라이선스 관리 -->
                <div class="settings-card" id="licenseCard">
                    <h3>🔐 라이선스</h3>
                    <p class="help-text">DocWatch Pro 라이선스를 관리합니다.</p>

                    <div class="license-status" id="licenseStatusContainer">
                        <div class="status-row">
                            <span class="status-label">상태:</span>
                            <span class="status-value" id="licenseType">확인 중...</span>
                        </div>
                        <div class="status-row">
                            <span class="status-label">만료일:</span>
                            <span class="status-value" id="licenseExpiry">-</span>
                        </div>
                        <div class="status-row" id="licenseDaysRow" style="display: none;">
                            <span class="status-label">남은 기간:</span>
                            <span class="status-value" id="licenseDays">-</span>
                        </div>
                    </div>

                    <!-- Trial/만료 시 활성화 UI -->
                    <div id="licenseActivationUI" style="display: none; margin-top: 16px;">
                        <div class="license-tabs">
                            <button class="license-tab active" data-tab="online">온라인 활성화</button>
                            <button class="license-tab" data-tab="offline">오프라인 활성화</button>
                        </div>

                        <!-- 온라인 활성화 -->
                        <div class="license-tab-content" id="onlineActivation">
                            <div class="form-group">
                                <label>라이선스 키</label>
                                <input type="text" id="licenseKeyInput" placeholder="XXXX-XXXX-XXXX-XXXX">
                            </div>
                            <button class="btn btn-primary" id="activateOnlineBtn">활성화</button>
                        </div>

                        <!-- 오프라인 활성화 -->
                        <div class="license-tab-content" id="offlineActivation" style="display: none;">
                            <div class="form-group">
                                <label>기기 ID (복사하여 관리자에게 전달)</label>
                                <div class="machine-id-box">
                                    <code id="machineIdDisplay">로딩 중...</code>
                                    <button class="btn btn-sm btn-secondary" id="copyMachineIdBtn">복사</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>오프라인 라이선스 키</label>
                                <textarea id="offlineKeyInput" rows="3" placeholder="관리자로부터 받은 오프라인 키를 입력하세요"></textarea>
                            </div>
                            <button class="btn btn-primary" id="activateOfflineBtn">오프라인 활성화</button>
                        </div>
                    </div>

                    <!-- Pro 상태일 때 -->
                    <div id="licenseProStatus" style="display: none; margin-top: 16px;">
                        <div class="pro-badge">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                            Pro 라이선스 활성화됨
                        </div>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>정보</h3>
                    <div class="info-list">
                        <div class="info-item">
                            <span class="info-label">버전</span>
                            <span class="info-value">1.0.0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">서버 포트</span>
                            <span class="info-value">4400</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">라이선스</span>
                            <span class="info-value">MIT</span>
                        </div>
                    </div>
                    <p class="help-text" style="margin-top: 15px; font-size: 11px;">
                        본 제품은 MIT 라이선스 기반 오픈소스를 사용하며<br>
                        모든 데이터는 로컬에서만 처리됩니다.
                    </p>
                </div>
            </section>
        </main>
    </div>

    <!-- 알림 소리 -->
    <audio id="notificationSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdH2Onq+1s6mXhHVrdHmFkZuem5WKfXNtc3qDjZWXlZCHfXVxdHuEjZOUkoqBd3JwdXyFjJCRjoV8c3Byd4GJjo+MhoB3cXB0e4OKjo6KhHxzcHJ4gYiMjYqFfnZycneAh4uMiYR+d3JzdoCHi4uJhH53c3V4gIaKi4mEf3d0dXmAhouLiIR/d3V3eoCGiYqIhH94dXd5gIaJioiEf3h2d3mAhoiJiIR/eHZ4eoCGiImHg396d3h5gIWIiIeDf3p4eHqAhYiHh4N/enh5e4CFh4eGg395eXl7gISGhoaDf3p5enyCg4WFhIN/e3p6fIKDhYSEgn97ent8goOEhIKBf3t7fH2Cg4SEgoF/fHt9fYKDg4OCgX98fH19goKDg4KBf3x8fX6CgoODgoF/fXx+foGCgoOCgYB9fX5+gYKCgoKBgH5+fn+BgYKCgoGAfn5/f4GBgoKBgYB+f39/gYGBgoGBgH9/f4CBgYGBgYGAf39/gIGBgYGBgYB/f4CAgYGBgYGBgH+AgICBgYGBgYGAf4CAgIGBgYGBgYB/gICAgYGBgYGAgH+AgICBgYGBgYCAf4CAgIGBgYGBgIB/gICAgYGBgYGAgH+AgICBgYGBgYB/f4CAgIGBgYGBgH9/gICAgYGBgYGAf3+AgICBgYGBgYB/f4CAgIGBgYGBgH9/gICA" type="audio/wav">
    </audio>

    <script src="/js/common.js"></script>
</body>
</html>
